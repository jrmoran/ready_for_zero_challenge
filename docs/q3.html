<!DOCTYPE html>  <html> <head>   <title>q3.coffee</title>   <meta http-equiv="content-type" content="text/html; charset=UTF-8">   <link rel="stylesheet" media="all" href="docco.css" /> </head> <body>   <div id="container">     <div id="background"></div>            <div id="jump_to">         Jump To &hellip;         <div id="jump_wrapper">           <div id="jump_page">                                           <a class="source" href="q1.html">                 q1.coffee               </a>                                           <a class="source" href="q2.html">                 q2.coffee               </a>                                           <a class="source" href="q3.html">                 q3.coffee               </a>                        </div>         </div>       </div>          <table cellpadding="0" cellspacing="0">       <thead>         <tr>           <th class="docs">             <h1>               q3.coffee             </h1>           </th>           <th class="code">           </th>         </tr>       </thead>       <tbody>                               <tr id="section-1">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-1">&#182;</a>               </div>               <p>The following sequence of digits sums to 5824.</p>

<p>Break up the sequence into the LARGEST number of contiguous subsequences
such that the sums of each of the subsequences are equal.</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">data = </span><span class="s2">&quot;2298163507642079319714044011236386616537514556458624876361063538594523631728704374833046762730571781372667347996722877761242458964516235987144911867899093570411259125272325950690385718016406645948728247900092493610635939061585125579278248678382561153927262068997135688096479833275438059003000577156030985752302737572142995389102392941277376055589936729467932043612276625158946842268530893693249010877756556663809256430403075836704397788157103267683082146557414910592210694688897583745853279150372366550265606245942901619641524394840947123797093291647952437507481770581519782926025000309975240809176732086412721877283182868239907386563436552684713604652833551208756316179487399401951895977814655415305700855625446129108900687384799001387951671104621436799720362491054813946856845126233235524710982837568591533011593761372364447069814628293634127437282262501219295880363659562599465416237996647317561877859528573985271179776400465798163016446475504146022123819119158936569549701762530276146646914630937941723419963811828693735274888334852800116766879328915880099767105948195091109555590581643322251908783026670007080972249010100892419108486345305849353679974424946961324819560021379840782224833262895740825258961195814695840112138347952831118547888120194142040782810626793593&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-2">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-2">&#182;</a>               </div>               <h2>Helper Functions</h2>

<p>Sum items in an array</p>

<pre><code>&gt; sum([1, 2, 3 ,4 ,5])
=&gt; 15
</code></pre>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">arrsum = </span><span class="nf">(arr)-&gt;</span>
  <span class="nv">total = </span><span class="mi">0</span>
  <span class="nx">total</span> <span class="o">+=</span> <span class="nx">x</span> <span class="k">for</span> <span class="nx">x</span> <span class="k">in</span> <span class="nx">arr</span>
  <span class="nx">total</span></pre></div>             </td>           </tr>                               <tr id="section-3">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-3">&#182;</a>               </div>               <p>This takes an array, computes the total sum and splits it into chunks</p>

<pre><code>&gt; split([1, 2, 3 ,4 ,5])
=&gt; # sum is 15
=&gt; [5, 3]
</code></pre>

<p>where <code>5 + 5 + 5 = 15</code> and <code>3 + 3 + 3 + 3 + 3 = 15</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">split_sum = </span><span class="nf">(arr)-&gt;</span>
  <span class="nv">sum = </span><span class="nx">arrsum</span> <span class="nx">arr</span>
  <span class="nv">sums = </span><span class="p">[]</span>
  <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span><span class="mi">2</span><span class="p">..</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="p">]</span>
    <span class="nx">sums</span><span class="p">.</span><span class="nx">push</span> <span class="nx">split</span> <span class="k">if</span> <span class="p">(</span><span class="nv">split = </span><span class="nx">sum</span><span class="err">/i) % 1 is 0</span>

  <span class="nx">sums</span></pre></div>             </td>           </tr>                               <tr id="section-4">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-4">&#182;</a>               </div>               <p>This evaluates an array and finds a sequence which elements sum is a given
number. It returns an array with indices if the sequence is found,
otherwise -1</p>

<pre><code>&gt; sequence([1, 2, 3 ,4 ,5], 10, 0)
=&gt; [0, 3]
</code></pre>

<p>where the range 0..3 sums 10. <code>1 + 2 + 3 + 4 = 10</code></p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">sequence = </span><span class="nf">(arr, sum, start)-&gt;</span> 
  <span class="k">for</span> <span class="nx">i</span> <span class="k">in</span> <span class="p">[</span> <span class="nx">start</span><span class="p">..</span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span> <span class="o">-</span> <span class="mi">1</span> <span class="p">]</span>
    <span class="k">if</span> <span class="nx">sum</span> <span class="o">is</span> <span class="nx">arrsum</span> <span class="nx">arr</span><span class="p">[</span><span class="nx">start</span><span class="p">..</span><span class="nx">i</span><span class="p">]</span>
      <span class="nv">last = </span><span class="nx">i</span>
      <span class="k">break</span></pre></div>             </td>           </tr>                               <tr id="section-5">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-5">&#182;</a>               </div>               <p>return the last index or -1 if a sequence is not found</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">if</span> <span class="o">!</span><span class="nb">isNaN</span> <span class="nx">last</span> <span class="k">then</span> <span class="p">[</span><span class="nx">start</span><span class="p">,</span> <span class="nx">last</span><span class="p">]</span> <span class="k">else</span> <span class="o">-</span><span class="mi">1</span></pre></div>             </td>           </tr>                               <tr id="section-6">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-6">&#182;</a>               </div>               <h2>Processing</h2>

<p>starting from the sum of the first two items</p>             </td>             <td class="code">               <div class="highlight"><pre><span class="nv">process = </span><span class="o">-&gt;</span></pre></div>             </td>           </tr>                               <tr id="section-7">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-7">&#182;</a>               </div>               <p>parsing into a numeric array</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="nv">arr = </span><span class="p">[]</span>
  <span class="nx">arr</span><span class="p">.</span><span class="nx">push</span> <span class="nb">parseInt</span> <span class="nx">x</span><span class="p">,</span> <span class="mi">10</span> <span class="k">for</span> <span class="nx">x</span> <span class="k">in</span> <span class="nx">data</span>

  <span class="nv">sums = </span><span class="nx">split_sum</span> <span class="nx">arr</span>
  <span class="nv">max = </span><span class="p">[</span><span class="mi">0</span><span class="p">,</span> <span class="mi">0</span><span class="p">]</span></pre></div>             </td>           </tr>                               <tr id="section-8">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-8">&#182;</a>               </div>               <p>get all possible chunks</p>             </td>             <td class="code">               <div class="highlight"><pre>  <span class="k">for</span> <span class="nx">sum</span> <span class="k">in</span> <span class="nx">sums</span>
    <span class="nv">last = </span><span class="nx">arr</span><span class="p">.</span><span class="nx">length</span><span class="o">-</span><span class="mi">1</span>
    <span class="nv">start = </span><span class="mi">0</span>
    <span class="nv">temp_sequence = </span><span class="p">[]</span>
    <span class="nv">sequences_n = </span><span class="mi">0</span></pre></div>             </td>           </tr>                               <tr id="section-9">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-9">&#182;</a>               </div>               <p>console.log "evaluating #{sum}"</p>             </td>             <td class="code">               <div class="highlight"><pre>    <span class="k">while</span> <span class="nx">start</span> <span class="o">&lt;</span> <span class="nx">last</span>
      <span class="nv">temp_sequence = </span><span class="nx">sequence</span> <span class="nx">arr</span><span class="p">,</span> <span class="nx">sum</span><span class="p">,</span> <span class="nx">start</span></pre></div>             </td>           </tr>                               <tr id="section-10">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-10">&#182;</a>               </div>               <p>if a contiguous sequence with a matching sum is not found skip
chunk and clean up sequences, otherwise add temporal sequence to 
contiguous sequences and set the start index to evaluate next
sequence in the array</p>             </td>             <td class="code">               <div class="highlight"><pre>      <span class="k">if</span> <span class="nx">temp_sequence</span> <span class="o">is</span> <span class="o">-</span><span class="mi">1</span>
        <span class="k">break</span>
      <span class="k">else</span>
        <span class="nv">start = </span><span class="nx">temp_sequence</span><span class="p">[</span><span class="mi">1</span><span class="p">]</span> <span class="o">+</span> <span class="mi">1</span>
        <span class="nv">max = </span><span class="p">[</span><span class="nx">sequences_n</span><span class="p">,</span> <span class="nx">sum</span><span class="p">]</span> <span class="k">if</span> <span class="nx">sequences_n</span><span class="o">++</span> <span class="o">&gt;</span> <span class="nx">max</span><span class="p">[</span><span class="mi">0</span><span class="p">]</span>

  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s2">&quot;Max contiguous sequences: #{max[0]}&quot;</span>
  <span class="nx">console</span><span class="p">.</span><span class="nx">log</span> <span class="s2">&quot;Sum chunk: #{max[1]}&quot;</span></pre></div>             </td>           </tr>                               <tr id="section-11">             <td class="docs">               <div class="pilwrap">                 <a class="pilcrow" href="#section-11">&#182;</a>               </div>               <h2>Running</h2>             </td>             <td class="code">               <div class="highlight"><pre><span class="nx">process</span><span class="p">()</span>

</pre></div>             </td>           </tr>                </tbody>     </table>   </div> </body> </html> 