# The 3072 characters below contain a sequence of 5 characters which is repeated.
#
# However, there is a twist: one of the sequences has a typo.
#
# To be specific,Â·you're looking for two groups of 5 characters which
# share 4 of those characters.

data = "en3pG3+nz+A2acXKrsyDouhViP9EDQS4JQK6uJqM3rBjKEBKC3yc=AA1=LUQqRPHvQ4dopgkbb/axClP3smzVcaTkRsCqHSG5aKFQ2TbOae0t5r4nWrCVesGK1Z3yEq+dClrDwXXOiAMyW09WdCS+CaKcfu=6kv9dUFBcS4KsUIgwMiXimoBpJZSWlBzILVf4zVA=7GjRP8RXn6uKjbjAPkpFEs/mYJpeOpEnhQfPhjoscgjfL5/SQsU6+jaAf5pg9MQzZdQAEJt7Jm1541fEmnumpjmJMd/MTJ5vzBttBBA7b5rbjDX0nHdTWn8C5suYKfNyYzc6x8S6FIepoEBsMS2mKhx5BRH5jSBrYRem4iQgYARzGnCFot3jPhp3cHj7qjXBWfZZASz8YJqi2d+r393AmdGm1L9NfU2f=FJprbLwJpuE7uT7xAlQA3Ry8aHRNgNkffP29Iqb2DSoQ0PK+9LX0t37HIAhI5zvoP6b4J7yQZEQDgeNlnPQMvSjw9pLWAxQ1VUY+NMU5BLZ2Bxuma1cIsHxcx4PwHcg0u1HYPJAWM2WK=xhJP5aQSc6oNMQK4s2=6guQRVFll6rvWkXTebrdsws7m/Kpa29spUFl8XzFx0ondEMCF3byAyWj875wAI3Hn8ZY92ddTAKj0s+a4X7qSti2lA0GzePHjBjMCD5g9kZYLtB94kkbVZ6eCle/xtto4LHH8GElc5YoUi=mk3nmQ5iOL1zMWfDyRUMLq+HCXbQL9NTejNa/yTdL3sayJOlMW1T7/Jmaz1FMbfBRFzruHeMT41=Zu3nYZJ3nIP22qKrFzNkt/24RuQ+7IMVCI2ngh2Yr8qLiL7QjSThRJPxA1wIJXwR2wqGiMhOqpun4DyQ5b/fTw1eTavpbFg6+tvqS4GKOt6p=bPoTV0GHIBBlXgHF/GUss90N0mXMKKiGwHhn/kyz=FxN0j=mfQUuUQa7lrZLjr10sqflWTwskIUkp1Cd8GYU4PaeWxiMBYFne4/8gJDt+dcZj9NV1U/B1lWigh9XvX7MiDWMAPvdrnGx0kp9v9V7LaL+JAkGGpa7s+CwwVr9C6rR0KIQLa2zF23o8men71vOVBt5Nn3U6rlmU6vWTwVhYCTptD8CHjKAX0EWcWo8T=gmYotqgXdi2y/VomdXCaBFLMtiVjpyY2npHF14p9yjvX/PBV9j4utnLeEPUZW7VD7SOc2FiqAMNBrsmNDSX64mbB6Rq1Jna36n55V5yB7=hx5FjowsqlDPD/HUR+yHAqSj7f3ZBjZZonmFFqE5ffwgf385zhjRG1x9JQRXbHG8SfLekwymb6KjkpxgZC6ATsbwALgUmmZbeMQxTAqUjyJIb9Oy2QxarahyX+bl8sElnM+j/IfvMwjSfDj/OZBl6AQpbVPfFFua4s2yhziu/vom5gtY/JDUOlEaRG=WBDX=W8Tjyx/dLE4xGuj8m9OlFWnLA6V4VVBPRbd3qUlQ9mQQYcqJj8pj=AWd3v2/yLw/SRw78lrSUajrz8i0=/mnd=8rsCMIi/F4d71XkH8V6C7Sd4IEsxVHG5EPreIZOAM0ehPTyZ4VQqHoTY2yjZwpu4LwNqQ0/l8Izyh3hczpHzl8Ai/gfkLXwR159IhKVgwP0/wxzcnnD2F8dBiQGHF7XEdbRmlplyvFos0dXsWfTFfBSRXwc2BGJtKyvO3ku2WIb1EAKJBq9rGNQv=WaMUeh087HNk+c1L6TQwCPrqm/HzaRtl3t1LYm1nmFpSfpZnbVohIfuWpIhAKrKWULSiJqJeD1Wo2TzRCh5E2tfqtRdfMvaoRoXAsU8i8RKHxmHu5qG0IUAI/ux4D0W=+Hw/DYCi47I3gaMpOf2ZsJa3SKr+kk4Hp2Oou1YfHyNw4VaPEXvkw+/WjU/9qqt4GOKAlG179j3slwGcxO6zMTxd/UoLw0h1S4wTqbi27zKkYiXB8fdTvxppQ9NAkIZQJpQ10ARdKByve6wqSznbhnGGiVEGwAmhTXPZ1v0NbAY+my1747N/2RdWSsEAX9m3WBniojR4AQENeXr=GZx0WZ01LlE2qScizbxu7UuDrCQL9LxuYf1/HYYwnzIhvvrldWmwAbylRJc1VYXGLu0dhkd/dbdIHvGr9AZQ37iMicXWvd/9E3ZftMJKPA9ilvdwCW42UMcXX8VTTQVgNNPWItRGtGWesVvugY8y5T/XZ=nOgdlwUqLsWtTH13cqgCmz+UgWcGnRFxVTmL17pJ6ZKucy8AkkUYQRsITfZfqhFxKbxR+oNTDFHSrhw/ADcOmh4ZeQA0AK67gvok4H9=t=v+6vFWEnvhrfr9RiHc9yVbwBUzAYTCZk2bOz0V6telWvtnon3Qo6qZu6SzALhnnZX4UXLpuk+Jtsfuu26dEg5Hf1I1C5l3i7+Vo6gmKGbyGe/BXf3Rhp2M/uVrNczYcZaH+GdTLUmXPEf/eZ62xKBDV0eoQAAqiv4h+xXTRvfL92dqizpXm9f35upJxwWo+jmRv1XH=ZVY5ocHnPWIXrhS3xz5fSx+uB0kcMaZz1Da6EW=AUZoccRx0nWrMUCmkDBzCQDi2Z+rXgv=Gzy96BKEkdLes9qGoLQoHJjIRlIkTPGixVXTMoWsV/f=HG9Aa2450cI1RmujMFkBRsyPDn0+zL2ZvoSIOXlHhx62zET=3mdbYsBmMiqAn88jBno7GUfbQ5DQ8L695cOtaOK9UF8ICSra5UswBmvUatVwvgMcKRSNDfTnEtsYt2+KSO8P1xCvHaJ=PiN95LM6PEzaGliQwZ7Dd=LWXR0GUBqqq+TsuTxGHLxzPvm119ceAEfyF8fqP/2Fuj6snCgRl1x/mbu/xBjUjvNAUGtfgtN5p8c3YlC9JN+D=XMo8MF0wYTqsXaN1ssGdXHsU0tbl2NZHizzJ4+njTYZMqmRTZD=h6zDW3ZkcGmGG0GLuo0TuJUTmE7tKpr7Sn2rWwWksdXe3GmicdYU0Py1YMtoO6qjGpDk0rJlDCyqzCi3RfH8R2C6+2WWx1NGhzmL2n8ku=iZT2uLnLn+RaeFse38LD38TKvjrYmxZFN4fGeKSdMqK"
# "
# The previous string breaks VIM's code highlighting, the additional
# quotation mark fix it

sequences = data.match /.{5}/g
last = sequences.length - 1

# Helper functions
# ----------------
#
# This returns the minimum of three numbers
minimum = (x, y, z)-> 
  min = x
  min = y if y < min
  min = z if z < min
  min

# Builds an array NxM of NaN values
arrNaN = (n, m)->
  m--
  n--
  arr = []
  for i in [ 0..n ]
    arr[i] = []
    for j in [ 0..m ]
      arr[i][j] = NaN

# This returns the levenshtein distance between two strings
# Based in http://www.merriampark.com/ld.htm
#
#     > levDist('jaime', 'jamie')
#     => 2
#
# This will produce the following matrix
#
#     +--------------------------+
#     |  |   | j | a | m | i | e |
#     |  | 0 | 1 | 2 | 3 | 4 | 5 |
#     |j | 1 | 0 | 1 | 2 | 3 | 4 |
#     |a | 2 | 1 | 0 | 1 | 2 | 3 |
#     |i | 3 | 2 | 1 | 1 | 1 | 2 |
#     |m | 4 | 3 | 2 | 1 | 2 | 2 |
#     |e | 5 | 4 | 3 | 2 | 2 | 2 |
#     +--------------------------+
#
# The distance is given by the last cell in the lower right
#
levDist = (source, target)->
  # when either string is empty return the length of the opposite
  ls = source.length
  lt = target.length
  return lt if ls is 0
  return ls if lt is 0

  # distance matrix
  dist = arrNaN ls + 1, lt + 1

  # first row
  dist[0][i] = i for i in [ 0..lt ]

  # first column
  dist[i][0] = i for i in [ 0..ls ]

  # evaluate the rest of the matrix
  for i in [ 1 ..ls ]
    for j in [ 1..lt ]
      # when characters are a match the cost is 0, otherwise is 1
      # adjust indices
      cost = if source[i-1] is target[j-1] then 0 else 1

      # this cell will contain the minimum of
      # * the upper cell + 1
      # * the cell to the left + 1
      # * the upper right cell + the cost
      dist[i][j] = minimum dist[i-1][j]   + 1,
                           dist[i][j-1]   + 1,
                           dist[i-1][j-1] + cost

  # console.log dist

  # the distance will be the last cell in the lower right
  dist[ls][lt]


# this will iterate over each element of an array and compare it against
# all elements to the right.
#
#     > [1, 2, 3, 4]
#     =>(1, 2), (1, 3), (1, 4), (2, 3), (2, 4), (3, 4)
#
# or
#
#    > ['jaime', 'jamie', 'james']
#    => ('jaime', 'jamie'), ('jaime', 'james'), ('jamie', 'james')
#
for i in [0..last]
  for j in [i..last]
    if i isnt j
      # finding the sequence with one typo
      dist = levDist sequences[i], sequences[j]
      if dist is 1
        console.log "Sequence: "
        console.log [ sequences[i], sequences[j] ]
        return
